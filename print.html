<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Nimbus Beacon Chain Book</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="medalla.html"><strong aria-hidden="true">3.</strong> Become a Medalla validator</a></li><li class="chapter-item expanded "><a href="medalla-troubleshooting.html"><strong aria-hidden="true">4.</strong> Troubleshooting Medalla</a></li><li class="chapter-item expanded "><a href="beacon_node.html"><strong aria-hidden="true">5.</strong> Running the beacon node</a></li><li class="chapter-item expanded "><a href="api.html"><strong aria-hidden="true">6.</strong> API</a></li><li class="chapter-item expanded affix "><li class="part-title">Advanced</li><li class="chapter-item expanded "><a href="advanced.html"><strong aria-hidden="true">7.</strong> For developers</a></li><li class="chapter-item expanded "><a href="beacon_node_systemd.html"><strong aria-hidden="true">8.</strong> Setting up a systemd service</a></li><li class="chapter-item expanded "><a href="create_wallet_and_deposit.html"><strong aria-hidden="true">9.</strong> Generating your keys with NBC</a></li><li class="chapter-item expanded affix "><li class="part-title">Misc</li><li class="chapter-item expanded "><strong aria-hidden="true">10.</strong> Windows users</li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">11.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">12.</strong> Contribute</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Nimbus Beacon Chain Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-nimbus-beacon-chain-book" id="the-nimbus-beacon-chain-book">The Nimbus beacon chain book</a></h1>
<p>The Nimbus beacon chain is a research implementation of the Beacon Chain – the core system level chain at the heart of Ethereum 2.0.</p>
<ul>
<li>
<p>Open sourced at <a href="https://github.com/status-im/nim-beacon-chain/tree/master">github.com/status-im/nim-beacon-chain</a></p>
</li>
<li>
<p>Specification described at <a href="https://github.com/ethereum/eth2.0-specs/tree/v0.12.2#phase-0">ethereum/eth2.0-specs</a></p>
</li>
</ul>
<h3><a class="header" href="#helpful-resources" id="helpful-resources">Helpful resources</a></h3>
<ul>
<li>
<p><a href="https://benjaminion.xyz/eth2-annotated-spec/phase0/beacon-chain/">Ben Edgington's annotated spec</a> </p>
</li>
<li>
<p><a href="https://github.com/ethereum/annotated-spec/blob/master/phase0/beacon-chain.md">Vitalik's annotated spec</a></p>
</li>
<li>
<p><a href="https://notes.ethereum.org/@djrtwo/Bkn3zpwxB">Danny Ryan's annotated spec</a></p>
</li>
</ul>
<h2><a class="header" href="#overview" id="overview">Overview</a></h2>
<p>In this book, we will cover:</p>
<ol>
<li>An <a href="./intro.html#introduction">introduction</a> to the beacon chain, eth2, and Nimbus to equip you with some basic knowledge</li>
<li><a href="./install.html">Installation steps</a> outlining the prerequisites to get started</li>
<li>How to <a href="./medalla.html">become a Medalla validator</a></li>
<li>How to <a href="./beacon_node.html">run the beacon node</a> software to sync the beacon chain</li>
<li>The <a href="./api.html">API</a> for monitoring your node</li>
<li><a href="./advanced.html">Advanced usage</a> for developers</li>
<li>How to <a href="./beacon_node_systemd.html">setup up a systemd service</a></li>
<li>How to <a href="./create_wallet_and_deposit.html">use Nimbus to generate your validator keys</a></li>
<li>Common <a href="./faq.html">questions and answers</a> to satisfy your curiosity</li>
<li>How to <a href="./contribute.html">contribute</a> to this book</li>
</ol>
<h2><a class="header" href="#introduction" id="introduction">Introduction</a></h2>
<h3><a class="header" href="#whats-the-beacon-chain" id="whats-the-beacon-chain">What's the Beacon Chain?</a></h3>
<p>In short, the beacon chain is the brain underpinning eth2 -- the next generation of Ethereum. It contains all of the machinery behind eth2's consensus.</p>
<p>You can find a complete introduction to the beacon chain in our <a href="https://our.status.im/two-point-oh-the-beacon-chain/">Ethereum 2.0 blog series</a>.</p>
<h3><a class="header" href="#why-eth2" id="why-eth2">Why eth2?</a></h3>
<p>Eth2 is a multi-year plan to improve the scalability, security, and programmability of Ethereum, without compromising on decentralisation.</p>
<p>In contrast to the Ethereum chain, as it currently stands, eth2 uses proof-of-stake (PoS) to secure its network. And while Ethereum as you know and love it will continue to exist as its own independent proof-of-work chain for a little while to come, the transition towards PoS starts now.</p>
<p>In traditional PoW, block proposers are called <strong><em>miners</em></strong>, whereas in PoS, they are called <strong><em>validators</em></strong>. In essence, <em>miners</em> rely on actual hardware (such as some specifically manufactured mining machines), while <em>validators</em> rely on software (such as Nimbus) and a good network connection.</p>
<h3><a class="header" href="#why-nimbus" id="why-nimbus">Why Nimbus?</a></h3>
<p>In a sentence, Nimbus aims to be an ethereum client for resource-restricted devices. </p>
<p>Because we believe that the largest deployment of Ethereum will be on embedded systems, Nimbus is being designed to perform well on IoT and personal mobile devices, including older smartphones with resource-restricted hardware.</p>
<p>Although Nimbus will support full and archival nodes, its main implementation will be as a light client, with a focus on Proof of Stake and sharding.</p>
<p>All our code is open source; we encourage you to keep track of our activity on <a href="github.com/status-im/nimbus">github.com/status-im/nimbus</a>) and keep up to date with our progress through the <a href="https://our.status.im/tag/nimbus/">Nimbus blog</a>.</p>
<h2><a class="header" href="#get-in-touch" id="get-in-touch">Get in touch</a></h2>
<p>Need help with anything? Join us on <a href="https://join.status.im/nimbus-general">Status</a> and <a href="https://discord.gg/9dWwPnG">Discord</a>!</p>
<h2><a class="header" href="#disclaimer" id="disclaimer">Disclaimer</a></h2>
<p>This documentation assumes Nimbus is in its ideal state. The project is still under active development. Please submit a <a href="https://github.com/status-im/nim-beacon-chain/issues">Github issue</a> if you come across a problem.</p>
<!-- > > > TODO:

1. fill up the gitbook content
2. write questions in the faq.md page -->
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>The Nimbus beacon chain can run on Linux, macOS, Windows, and Android. At the moment, Nimbus has to be built from source.</p>
<h2><a class="header" href="#time" id="time">Time</a></h2>
<p>The beacon chain relies on your computer having the correct time set (plus or minus 0.5 seconds).</p>
<p>We recommended you run a high quality time service on your computer such as:</p>
<ul>
<li>GPS</li>
<li>NTS (network time security, <a href="https://tools.ietf.org/html/draft-ietf-ntp-using-nts-for-ntp-19">IETF draft</a>)</li>
<li><a href="https://roughtime.googlesource.com/roughtime">Roughtime</a> (google)</li>
</ul>
<p>At a minimum, you should run an NTP client on the server.</p>
<blockquote>
<p><strong>Note:</strong> Most operating systems (including macOS') automatically sync with NTP by default.</p>
</blockquote>
<p>If the above sounds like latin to you, don't worry. You should be fine as long as you haven't messed around with the time and date settings on your computer (they should be set automatically).</p>
<h2><a class="header" href="#external-dependencies" id="external-dependencies">External Dependencies</a></h2>
<ul>
<li>Developer tools (C compiler, Make, Bash, Git)</li>
<li><a href="https://www.pcre.org/">PCRE</a></li>
</ul>
<p>Nimbus will build its own local copy of Nim, so Nim is not an external dependency, </p>
<h2><a class="header" href="#linux" id="linux">Linux</a></h2>
<p>On common Linux distributions the dependencies can be installed with</p>
<pre><code class="language-sh"># Debian and Ubuntu
sudo apt-get install build-essential git libpcre3-dev

# Fedora
dnf install @development-tools pcre

# Archlinux, using an AUR manager for pcre-static
yourAURmanager -S base-devel pcre-static
</code></pre>
<h3><a class="header" href="#macos" id="macos">macOS</a></h3>
<p>Assuming you use <a href="https://brew.sh/">Homebrew</a> to manage packages</p>
<pre><code class="language-sh">brew install pcre cmake
</code></pre>
<h3><a class="header" href="#windows" id="windows">Windows</a></h3>
<p>You can install the developer tools by following the instruction in our <a href="./advanced.html#windows-dev-environment">Windows dev environment section</a>.
We also provide a downloading script for prebuilt PCRE.</p>
<h3><a class="header" href="#android" id="android">Android</a></h3>
<ul>
<li>Install the <a href="https://termux.com">Termux</a> app from FDroid or the Google Play store</li>
<li>Install a <a href="https://wiki.termux.com/wiki/PRoot">PRoot</a> of your choice following the instructions for your preferred distribution.
Note, the Ubuntu PRoot is known to contain all Nimbus prerequisites compiled on Arm64 architecture (the most common architecture for Android devices).</li>
</ul>
<p>Assuming you  use Ubuntu PRoot</p>
<pre><code class="language-sh">apt install build-essential git libpcre3-dev
</code></pre>
<h2><a class="header" href="#next-steps" id="next-steps">Next steps</a></h2>
<p>You're now ready to move on to <a href="./medalla.html">running a validator on Medalla</a>.</p>
<h1><a class="header" href="#become-a-medalla-validator" id="become-a-medalla-validator">Become a Medalla validator</a></h1>
<p>This chapter will take you through how to become a validator on the eth2 testnet <a href="https://github.com/goerli/medalla">Medalla</a>.</p>
<p>If you generated your signing key using the <a href="https://medalla.launchpad.ethereum.org/">eth2 launchpad</a>, and wish to import it into the Nimbus client, this page is for you.</p>
<blockquote>
<p>If you haven't created your validator key yet, we recommend you do so using the <a href="https://medalla.launchpad.ethereum.org/">launchpad</a>. If you're not sure what the eth2 launchpad is, we recommend reading this <a href="https://blog.ethereum.org/2020/07/27/eth2-validator-launchpad/">introductory post</a> first.</p>
</blockquote>
<h2><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h2>
<p>If this is your first time playing with Nimbus, make sure you <a href="./install.html">install our external dependencies</a> first.</p>
<p>This tutorial assumes basic knowledge of the <a href="https://www.learnenough.com/command-line-tutorial/basics#:%7E:text=Learn%20Enough%20Command%20Line%20to%20Be%20Dangerous%20is%20an%20introduction,broad%20an%20audience%20as%20possible.">command line</a>.</p>
<h2><a class="header" href="#validating" id="validating">Validating</a></h2>
<p>To start validating on the <code>medalla</code> network:</p>
<h4><a class="header" href="#1-clone-the-nim-beacon-chain-repository" id="1-clone-the-nim-beacon-chain-repository">1. Clone the nim beacon chain repository</a></h4>
<pre><code>git clone https://github.com/status-im/nim-beacon-chain
cd nim-beacon-chain
</code></pre>
<h4><a class="header" href="#2-build-the-beacon-node" id="2-build-the-beacon-node">2. Build the beacon node</a></h4>
<pre><code>make beacon_node
</code></pre>
<p><em>Patience... this may take a few minutes.</em></p>
<h4><a class="header" href="#3-import-keystores" id="3-import-keystores">3. Import keystore(s)</a></h4>
<pre><code>build/beacon_node deposits import  --data-dir=build/data/shared_medalla_0 &lt;YOUR VALIDATOR KEYS DIRECTORY&gt;
</code></pre>
<p>Replacing <code>&lt;YOUR VALIDATOR KEYS DIRECTORY&gt;</code> with the full pathname of your <code>validator_keys</code> directory.</p>
<blockquote>
<p>Tip: run <code>pwd</code> in your <code>validator_keys</code> directory to print the full pathname to the console.</p>
</blockquote>
<p>You'll be asked to enter the password you created to encrypt your keystore(s) in the <em>Generate Keys</em> section of the Launchpad process. Don't worry, this is entirely normal. Your validator client needs both your keystore(s) and the password encrypting it to import your <a href="https://blog.ethereum.org/2020/05/21/keys/">keys</a> (since it needs to decrypt the keystore in order to be able to use it to sign on your behalf).</p>
<h4><a class="header" href="#4-connect-to-medalla" id="4-connect-to-medalla">4. Connect to Medalla</a></h4>
<pre><code>make medalla
</code></pre>
<p>This will build Nimbus and its dependencies, and connect you to Medalla.
You should see that the beacon node has launched with your validator attached:</p>
<pre><code>WRN 2020-08-03 16:24:17.950+02:00 Validator not in registry (yet?)           topics=&quot;beacval&quot; tid=11677993 file=validator_duties.nim:53 pubKey=a9c4df36
INF 2020-08-03 16:24:17.951+02:00 Local validator attached                   tid=11677993 file=validator_pool.nim:21 pubKey=a9c4df36 validator=a9c4df36
INF 2020-08-03 16:24:17.951+02:00 Local validators attached                  topics=&quot;beacval&quot; tid=11677993 file=validator_duties.nim:61 count=1
INF 2020-08-03 16:24:17.958+02:00 Starting beacon node                       topics=&quot;beacnde&quot; tid=11677993 file=beacon_node.nim:875 version=&quot;0.5.0 (31b33907)&quot; nim=&quot;Nim Compiler Version 1.2.6 [MacOSX: amd64] (bf320ed1)&quot; timeSinceFinalization=81350 head=ebe49843:0 finalizedHead=ebe49843:0 SLOTS_PER_EPOCH=32 SECONDS_PER_SLOT=12 SPEC_VERSION=0.12.2 dataDir=build/data/shared_medalla_0 pcs=start_beacon_node
</code></pre>
<blockquote>
<p>Tip: to 🎨 on the <a href="https://medalla.beaconcha.in/graffitiwall">graffitwall</a>, pass the graffiti parameter like this:</p>
<pre><code>make NODE_PARAMS=&quot;--graffiti='&lt;YOUR_GRAFFITI&gt;'&quot; medalla
</code></pre>
</blockquote>
<h4><a class="header" href="#5-keep-an-eye-on-your-validator" id="5-keep-an-eye-on-your-validator">5. Keep an eye on your validator</a></h4>
<p>If you deposited after the <a href="https://hackmd.io/@benjaminion/genesis">genesis</a> state was decided (August 2nd 1300 UTC), your validators will have been put in a queue based on deposit time, and will slowly be inducted into the validator set after genesis. Getting through the queue may take a few hours or days.</p>
<p>The best way to keep track of your validator's status is <a href="https://medalla.beaconcha.in">medalla.beaconcha.in</a> (click on the orange magnifying glass at the very top and paste in its public key). </p>
<p>You can even <a href="https://medalla.beaconcha.in/register">create an account</a> to add alerts and keep track of your validator's <a href="https://medalla.beaconcha.in/dashboard">performance</a>.</p>
<p>To keep track of your syncing progress, have a look at the output at the very bottom of the terminal window in which your validator is running. You should see something like:</p>
<pre><code>peers: 35 ❯ finalized: ada7228a:8765 ❯ head: b2fe11cd:8767:2 ❯ time: 9900:7 (316807) ❯ sync: wPwwwwwDwwDPwPPPwwww:7:4.0627 (280512) 
</code></pre>
<p>Where: </p>
<ul>
<li><code>peers</code> tells you how many peers you're currently connected to (in the above case, 35 peers)</li>
<li><code>finalized</code> tells you the most recent finalized epoch you've synced to so far (the 8765th epoch)</li>
<li><code>head</code> tells you the most recent slot you've synced to so far (the 2nd slot of the 8767th epoch)</li>
<li><code>time</code> tells you the current time since Genesis (the 7th slot of the 9900th epoch -- or equivalently, the 316,807th slot)</li>
<li><code>sync</code> tells you how fast you're syncing (4.0627 blocks per second), how many blocks you've synced so far (280,512), along with information about the 20 syncing workers linked to the 20 most performant peers you are currently connected to (represented by a string of letters and a number).</li>
</ul>
<p>To dig into <code>sync</code> a little:</p>
<pre><code>sync: &lt;sync worker map&gt;:&lt;number of active workers&gt;:&lt;current syncing speed in blocks/second&gt;
</code></pre>
<p>The string of letters -- what we call the <code>sync worker map</code> (in the above case represented by <code>wPwwwwwDwwDPwPPPwwww</code>) represents the status of these workers, where:</p>
<pre><code>    s - sleeping (idle),
    w - waiting for a peer from PeerPool,
    R - requesting blocks from peer
    D - downloading blocks from peer
    P processing/verifying blocks
    U updating peer's status information
</code></pre>
<p>The number following it (in the above case represented by <code>7</code>) represents the number of workers that are currently active (i.e not sleeping or waiting for a peer).</p>
<h4><a class="header" href="#6-keep-your-validator-updated" id="6-keep-your-validator-updated">6. Keep your validator updated</a></h4>
<p>Finally, makes sure you stay on the lookout for any critical updates to Nimbus. This best way to do so is through the <strong>medalla-announcements</strong> channel on our <a href="https://discord.com/invite/XRxWahP">discord</a>.</p>
<p>To update to the latest version, disconnect from medalla and run:</p>
<pre><code>git pull &amp;&amp; make update
</code></pre>
<p>Once the update is complete, run <code>make medalla</code> to reconnect to the network.</p>
<p>Looking forward to seeing you on Medalla! 💛</p>
<h2><a class="header" href="#key-management" id="key-management">Key management</a></h2>
<p>Keys are stored in the <code>build/data/shared_medalla_0/</code> folder, under <code>secrets</code> and <code>validators</code> - make sure you keep these folders backed up.</p>
<p>The <code>secrets</code> folder contains the common secret that gives you access to all your validator keys.</p>
<p>The <code>validators</code> folder contains your keystores (encrypted keys). Keystores are used by validators as a method for exchanging keys. For more on keys and keystores, see <a href="https://blog.ethereum.org/2020/05/21/keys/">here</a>.</p>
<blockquote>
<p><strong>Note:</strong> The Nimbus client will only ever import your signing key -- in any case, if you used the deposit launchpad, this is the only key you should have (you can generate the withdrawal key from your mnemonic when you wish to withdraw).</p>
</blockquote>
<h2><a class="header" href="#metrics" id="metrics">Metrics</a></h2>
<p>Metrics are not included in the binary by default - to enable them, use the following options when starting the client:</p>
<pre><code>make NIMFLAGS=&quot;-d:insecure&quot; medalla
</code></pre>
<p>You can then browse the metrics by connecting to:</p>
<p>http://localhost:8008/metrics</p>
<p>Make sure this port is protected as the http server used is not considered secure (it should not be used by untrusted peers).</p>
<h2><a class="header" href="#advanced-options" id="advanced-options">Advanced options</a></h2>
<h3><a class="header" href="#start-multiple-nodes" id="start-multiple-nodes">Start multiple nodes</a></h3>
<p>You can start multiple local nodes, in different terminal windows/tabs, by specifying numeric IDs:</p>
<pre><code>make medalla NODE_ID=0 # the default
make medalla NODE_ID=1
make medalla NODE_ID=2
</code></pre>
<h3><a class="header" href="#attach-multiple-validators-to-the-same-beacon-node" id="attach-multiple-validators-to-the-same-beacon-node">Attach multiple validators to the same beacon node</a></h3>
<p>Simply <a href="./medalla.html#3-import-keystores">import as many keystores as you wish</a> before running <code>make medalla</code>. Nimbus will automagically find your keys and attach your validators. See <a href="./medalla.html#key-management">key management</a> for more information on where we store your keys.</p>
<p>To give you some context, we (the Nimbus team) are currently running 170 validators per beacon node on our AWS instances.</p>
<h3><a class="header" href="#change-the-tcp-and-udp-ports" id="change-the-tcp-and-udp-ports">Change the TCP and UDP ports</a></h3>
<p>To change the TCP and UDP ports from their default value of 9000 to 9100, say, run:</p>
<pre><code>make BASE_PORT=9100 medalla
</code></pre>
<p>You may need to do this if you are running another client.</p>
<h3><a class="header" href="#make-a-deposit-directly-using-nimbus" id="make-a-deposit-directly-using-nimbus">Make a deposit directly using Nimbus</a></h3>
<pre><code>make medalla-deposit VALIDATORS=2 # default is just 1
</code></pre>
<h3><a class="header" href="#node-parameters" id="node-parameters">Node parameters</a></h3>
<p>You can customise your beacon node's parameters using the <code>NODE_PARAMS</code> option:</p>
<pre><code>make NODE_PARAMS=&quot;--tcp-port=9100 --udp-port=9100&quot; medalla
</code></pre>
<blockquote>
<p><strong>Note:</strong> the above command has exactly the same effect as <code>make BASE_PORT=9100 medalla</code></p>
</blockquote>
<p>A complete list of the available parameters can be found <a href="https://github.com/status-im/nim-beacon-chain/blob/devel/beacon_chain/conf.nim#L92-L210">here</a> (use a parameter's <code>name</code> field to set it).</p>
<h3><a class="header" href="#logs" id="logs">Logs</a></h3>
<p>Log files are saved in <code>build/data/shared_medalla_0/</code>.</p>
<h3><a class="header" href="#makefile" id="makefile">Makefile</a></h3>
<p>If you are comfortable reading <a href="https://en.wikipedia.org/wiki/Makefile#:%7E:text=A%20makefile%20is%20a%20file,to%20generate%20a%20target%2Fgoal">Makefiles</a>, you can see the commands that <code>make medalla</code>  executes under the hood, <a href="https://github.com/status-im/nim-beacon-chain/blob/devel/Makefile#L184-L197">here</a>.</p>
<p>Some of the provided options (such as <code>--network=medalla</code>) are essential while others (such as the ones controlling logging, metrics, ports, and the RPC service) are there for convenience.</p>
<p>The Goerli testnet parameters (<code>$(GOERLI_TESTNETS_PARAMS</code>), are defined higher up in the Makefile, <a href="https://github.com/status-im/nim-beacon-chain/blob/devel/Makefile#L158-L165">here</a>.</p>
<h1><a class="header" href="#troubleshooting-medalla" id="troubleshooting-medalla">Troubleshooting Medalla</a></h1>
<p>As it stands, we are continuously making improvements to both stability and memory usage. So please make sure you keep your client up to date! This means restarting your node and updating your software regularly from the <code>master</code> branch. If you can't find a solution to your problem here, feel free to hit us up on our <a href="https://discord.com/invite/XRxWahP">discord</a>!</p>
<blockquote>
<p><strong>Note:</strong> While the <code>master</code> branch of the <code>nim-beacon-chain</code> repository is more stable, the latest updates happen in the <code>devel</code> branch which is (usually) merged into master every week on Tuesday. If you choose to run Nimbus directly from the <code>devel</code> branch, be prepared for instabilities!</p>
</blockquote>
<p>To update and restart, run <code>git pull</code>, <code>make update</code>, followed by <code>make medalla</code>:</p>
<pre><code>cd nim-beacon-chain
git pull
make update # Update dependencies
make medalla # Restart using same keys as last run
</code></pre>
<p>If you find that <code>make update</code> causes the console to hang for too long, try running <code>make update V=1</code> or <code>make update V=2</code> instead (these will print a more verbose output to the console which may make it easier to diagnose the problem).</p>
<blockquote>
<p><strong>Note:</strong> rest assured that when you restart the beacon node, the software will resume from where it left off, using the validator keys you have already imported.</p>
</blockquote>
<h3><a class="header" href="#starting-over" id="starting-over">Starting over</a></h3>
<p>The directory that stores the blockchain data of the testnet is <code>build/data/shared_medalla_0</code> (if you're connecting to another testnet, replace <code>medalla</code> with that testnet's name). Delete this folder to start over (for example, if you started building medalla with the wrong private keys).</p>
<h3><a class="header" href="#syncing" id="syncing">Syncing</a></h3>
<p>If you’re experiencing sync problems,  we recommend running <code>make clean-medalla</code> to delete the database and restart your sync (make sure you’ve updated to the latest <code>master</code> first though).</p>
<blockquote>
<p><strong>Warning</strong>: <code>make clean-medalla</code> will erase all of your syncing progress so far, so it should only be used as a last resort -- if your client gets stuck for a long time (because it's unable to find the right chain and/or stay with the same head value) and a normal restart doesn't improve things.</p>
</blockquote>
<h3><a class="header" href="#pruning-the-database" id="pruning-the-database">Pruning the database</a></h3>
<p>If you're running out of storage, you can <a href="https://blog.ethereum.org/2015/06/26/state-tree-pruning/">prune</a> the database of unnecessary blocks and states by running:</p>
<pre><code>make ncli_db
build/ncli_db pruneDatabase --db=build/data/shared_medalla_0/db --verbose=true
</code></pre>
<p>This will create <code>nbc_pruned.sqlite3</code> files in <code>build/data/shared_medalla_0/db</code>, which you can use in place of the orginal <code>nbc.sqlite3</code> files. We recommend you hold onto the originals until you've verified that your validator is behaving as expected with the pruned files.</p>
<p>Options:</p>
<ul>
<li><code>--keepOldStates</code> (boolean):  Keep pre-finalisation states; defaults to <code>true</code>.</li>
<li><code>--verbose</code> (boolean): Print a more verbose output to the console; defaults to <code>false</code>.</li>
</ul>
<h3><a class="header" href="#keeping-up-with-the-head-of-the-chain" id="keeping-up-with-the-head-of-the-chain">Keeping up with the head of the chain</a></h3>
<p>As it stands, logging seems to be slowing down the client,  and quite a few users are experiencing trouble either catching up or keeping up with the head of the chain. You can use either the <code>LOG_LEVEL=INFO</code> or <code>LOG_LEVEL=NOTICE</code> options to reduce verbosity and speed up the client (<code>NOTICE</code> is even less verbose than <code>INFO</code>).</p>
<pre><code>make LOG_LEVEL=INFO medalla
</code></pre>
<h3><a class="header" href="#low-peer-counts" id="low-peer-counts">Low peer counts</a></h3>
<p>If you're experiencing a low peer count, you may be behind a firewall. Try restarting your client and passing <code>NODE_PARAMS=&quot;--nat:\&quot;extip:$EXT_IP_ADDRESS\&quot;&quot;</code> as an option to <code>make medalla</code>, where <code>$EXT_IP_ADDRESS</code> is your real IP. For example, if your real IP address is <code>35.124.65.104</code>, you'd run:</p>
<pre><code>make NODE_PARAMS=&quot;--nat:\&quot;extip:35.124.65.104\&quot;&quot; medalla
</code></pre>
<h3><a class="header" href="#resource-leaks" id="resource-leaks">Resource leaks</a></h3>
<p>If you're experiencing RAM related resource leaks, try restarting your client (<strong>we recommend restarting every 6 hours</strong> until we get to the bottom of this issue). If you have a <a href="https://github.com/status-im/nim-beacon-chain#getting-metrics-from-a-local-testnet-client">local Grafana setup</a>, you can try monitoring the severity of these leaks and playing around with the restart interval.</p>
<h1><a class="header" href="#the-beacon-node" id="the-beacon-node">The beacon node</a></h1>
<p>The beacon node application connects to the eth2 network, manages the blockchain, and provides API's to interact with the beacon chain.</p>
<p>You can <strong>run the beacon node without being a validator</strong> - doing so allows you to sync the network and access its latest state.</p>
<h2><a class="header" href="#prerequisites-1" id="prerequisites-1">Prerequisites</a></h2>
<p>Before building and running the application, make sure you've gone through the <a href="./install.html">installation guidelines</a>.</p>
<h2><a class="header" href="#building-the-node" id="building-the-node">Building the node</a></h2>
<p>To build the beacon run:</p>
<h4><a class="header" href="#1-clone-the-nim-beacon-chain-repository-1" id="1-clone-the-nim-beacon-chain-repository-1">1. Clone the nim beacon chain repository</a></h4>
<pre><code>git clone https://github.com/status-im/nim-beacon-chain
cd nim-beacon-chain
</code></pre>
<h4><a class="header" href="#2-run-the-beacon-node-build-process" id="2-run-the-beacon-node-build-process">2. Run the beacon node build process</a></h4>
<pre><code>make beacon_node
</code></pre>
<h2><a class="header" href="#running-the-node" id="running-the-node">Running the node</a></h2>
<p>When running the beacon node, you connect to a specific ethereum 2 network - this may be a private network or a public testnet like <a href="https://github.com/goerli/medalla/">Medalla</a>.</p>
<blockquote>
<p><strong>Note:</strong> when running the node for the first time, you may need to specify network parameters, boot nodes and genesis information. This information can typically be found in the <a href="https://github.com/eth2-clients/eth2-testnets">eth2 testnets</a> repository.</p>
</blockquote>
<p>Once the beacon node is running, it will first connect to the boot nodes in the network, look for more peers and start syncing the chain. Once the sync is complete, it will keep following the head of the chain (you can interact with it through the <a href="./api.html">API</a>.</p>
<p>Before running the beacon node, it's important that your computer is set to the correct time - preferably using a trusted time source (this can be an NTP server you trust, GPS time or another precise source of time) -- however don't worry if you're unsure of how to do this, it isn't essential for testnet purposes.</p>
<h3><a class="header" href="#syncing-1" id="syncing-1">Syncing</a></h3>
<p>To start syncing the <code>medalla</code> network:</p>
<pre><code>make medalla

# Build output...

</code></pre>
<p>This will build Nimbus and its dependencies, and connect you to Medalla.
You should see that the beacon node has launched and started syncing.</p>
<pre><code>INF 2020-07-03 15:28:15+02:00 Starting beacon node                       topics=&quot;beacnde&quot; tid=176865 file=beacon_node.nim:866 SECONDS_PER_SLOT=12 SLOTS_PER_EPOCH=32 SPEC_VERSION=0.12.1 cat=init dataDir=/home/arnetheduck/status/nim-beacon-chain/build/data/shared_medalla_0 finalizedRoot=72e7b21c finalizedSlot=20064 headRoot=f92bf720 headSlot=20142 nim=&quot;Nim Compiler Version 1.2.2 [Linux: amd64] (be34b5ab)&quot; pcs=start_beacon_node timeSinceFinalization=-108322 version=&quot;0.5.0 (c64737e)&quot;


 peers: 7 ❯ finalized: 3a806c9f:634 ❯ head: b364f8e9:636:29 ❯ time: 909:7 (29095)              ETH: 0.0
</code></pre>
<h3><a class="header" href="#status-bar" id="status-bar">Status bar</a></h3>
<p>The status bar shows important health information about your node:</p>
<ul>
<li>peers - The number of peers you're connected to</li>
<li>finalized - The block root and epoch of the latest finalized checkpoint - when the network is healthy, this value will stay at 2-3 epochs from the wall clock</li>
<li>head - The block root and time of the head block - as blocks are produced and processed, this will be updated to the latest head block as chosen by the consensus algorithm.</li>
<li>time - The current wall time according to your computer - when the node is synced, the head block will closely follow this time.</li>
<li>ETH: the total ETH validators attached to the node have accumulated. When there are no validators attached, this number will be 0.</li>
</ul>
<p>Time is shown as <code>epoch:subslot</code>, starting from the block chain genesis time - one epoch is typically 32 slots but this may vary between networks.</p>
<p>The status bar content may be updated using command line flags.</p>
<h3><a class="header" href="#metrics-1" id="metrics-1">Metrics</a></h3>
<p>Nimbus includes metrics support using the Prometheus format. To enable it, you need to enable the insecure feature when compiling the application. The http server that exports Prometheus metrics should not be exposed to external parties.</p>
<pre><code># Compile with insecure features enabled
make NIMFLAGS=&quot;-d:insecure&quot; medalla
</code></pre>
<h2><a class="header" href="#help" id="help">Help</a></h2>
<p>To see a list of command line options with descriptions, navigate to the <code>build</code> directory and run:</p>
<pre><code>./beacon_node --help
</code></pre>
<p>You should see the following output:</p>
<pre><code>Usage:

beacon_node [OPTIONS]... command

The following options are available:

     --log-level               Sets the log level.
     --eth1-network            The Eth1 network tracked by the beacon node.
 -d, --data-dir                The directory where nimbus will store all blockchain data.
     --web3-url                URL of the Web3 server to observe Eth1.
     --deposit-contract        Address of the deposit contract.
     --deposit-contract-block  The Eth1 block hash where the deposit contract has been deployed.
     --non-interactive         Do not display interative prompts. Quit on missing configuration.
 -b, --bootstrap-node          Specifies one or more bootstrap nodes to use when connecting to the network.
     --bootstrap-file          Specifies a line-delimited file of bootstrap Ethereum network addresses.
     --listen-address          Listening address for the Ethereum LibP2P traffic.
     --tcp-port                Listening TCP port for Ethereum LibP2P traffic.
     --udp-port                Listening UDP port for node discovery.
     --max-peers               The maximum number of peers to connect to.
     --nat                     Specify method to use for determining public address. Must be one of: any, none,
                               upnp, pmp, extip:&lt;IP&gt;.
 -v, --validator               Path to a validator keystore.
     --validators-dir          A directory containing validator keystores.
     --secrets-dir             A directory containing validator keystore passwords.
     --wallets-dir             A directory containing wallet files.
 -s, --state-snapshot          Json file specifying a recent state snapshot.
     --node-name               A name for this node that will appear in the logs. If you set this to 'auto', a
                               persistent automatically generated ID will be selected for each --data-dir
                               folder.
     --verify-finalization     Specify whether to verify finalization occurs on schedule, for testing.
     --stop-at-epoch           A positive epoch selects the epoch at which to stop.
     --metrics                 Enable the metrics server.
     --metrics-address         Listening address of the metrics server.
     --metrics-port            Listening HTTP port of the metrics server.
     --status-bar              Display a status bar at the bottom of the terminal screen.
     --status-bar-contents     Textual template for the contents of the status bar.
     --rpc                     Enable the JSON-RPC server.
     --rpc-port                HTTP port for the JSON-RPC service.
     --rpc-address             Listening address of the RPC server.
     --in-process-validators   Disable the push model (the beacon node tells a signing process with the private
                               keys of the validators what to sign and when) and load the validators in the
                               beacon node itself.
     --dump                    Write SSZ dumps of blocks, attestations and states to data dir.

Available sub-commands:

beacon_node_shared_medalla_0 createTestnet [OPTIONS]...

The following options are available:

     --validators-dir          Directory containing validator keystores.
     --total-validators        The number of validator deposits in the newly created chain.
     --first-validator         Index of first validator to add to validator list.
     --last-user-validator     The last validator index that will free for taking from a testnet participant.
     --bootstrap-address       The public IP address that will be advertised as a bootstrap node for the
                               testnet.
     --bootstrap-port          The TCP/UDP port that will be used by the bootstrap node.
     --genesis-offset          Seconds from now to add to genesis time.
     --output-genesis          Output file where to write the initial state snapshot.
     --with-genesis-root       Include a genesis root in 'network.json'.
     --output-bootstrap-file   Output file with list of bootstrap nodes for the network.

beacon_node_shared_medalla_0 deposits [OPTIONS]... command

The following options are available:

     --deposit-private-key     Private key of the controlling (sending) account.

Available sub-commands:

beacon_node_shared_medalla_0 deposits create [OPTIONS]...

Creates validator keystores and deposits.

The following options are available:

     --count                   Number of deposits to generate.
     --wallet                  An existing wallet ID. If not specified, a new wallet will be created.
     --out-validatorss-dir     Output folder for validator keystores and deposits.
     --out-secrets-dir         Output folder for randomly generated keystore passphrases.
     --dont-send               By default, all created deposits are also immediately sent to the validator
                               deposit contract. You can use this option to prevent this behavior. Use the
                               `deposits send` command to send the deposit transactions at your convenience
                               later.

beacon_node_shared_medalla_0 deposits send [OPTIONS]...

Sends prepared deposits to the validator deposit contract.

The following options are available:

     --validators-dir          A folder with validator metadata created by the `deposits create` command.
     --min-delay               Minimum possible delay between making two deposits (in seconds).
     --max-delay               Maximum possible delay between making two deposits (in seconds).

beacon_node_shared_medalla_0 deposits status

Displays status information about all deposits.

beacon_node_shared_medalla_0 wallets command

Available sub-commands:

beacon_node_shared_medalla_0 wallets create [OPTIONS]...

Creates a new EIP-2386 wallet.

The following options are available:

     --name                    An easy-to-remember name for the wallet of your choice.
     --next-account            Initial value for the 'nextaccount' property of the wallet.
     --out                     Output wallet file.

beacon_node_shared_medalla_0 wallets restore [OPTIONS]...

Restores a wallet from cold storage.

The following options are available:

     --name                    An easy-to-remember name for the wallet of your choice.
     --deposits                Expected number of deposits to recover. If not specified, Nimbus will try to
                               guess the number by inspecting the latest beacon state.
     --out                     Output wallet file.

beacon_node_shared_medalla_0 wallets list

Lists details about all wallets.
</code></pre>
<h1><a class="header" href="#apis" id="apis">APIs</a></h1>
<p>NBC exposes a collection of APIs for querying the state of the application at runtime.</p>
<blockquote>
<p><strong>Note:</strong> Where applicable, these APIs mimic the <a href="https://github.com/ethereum/eth2.0-APIs">eth2 APIs</a> with the exception that JSON-RPC is used instead of http rest (the method names, parameters and results are all the same except for the encoding / access method).</p>
</blockquote>
<h2><a class="header" href="#introduction-1" id="introduction-1">Introduction</a></h2>
<p>The NBC API is implemented using JSON-RPC 2.0. To query it, you can use a JSON-RPC library in the language of your choice, or a tool like <code>curl</code> to access it from the command line. A tool like <a href="https://stedolan.github.io/jq/">jq</a> is helpful to pretty-print the responses.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;peers&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<p>Before you can access the API, make sure it's enabled using the RPC flag (<code>beacon_node --rpc</code>):</p>
<pre><code>     --rpc                     Enable the JSON-RPC server.
     --rpc-port                HTTP port for the JSON-RPC service.
     --rpc-address             Listening address of the RPC server.
</code></pre>
<p>One difference is that currently endpoints that correspond to specific ones from the <a href="https://ethereum.github.io/eth2.0-APIs/">spec</a> are named weirdly - for example an endpoint such as <a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getGenesis"><code>getGenesis</code></a> is currently named <code>get_v1_beacon_genesis</code> which would map 1:1 to the actual REST path in the future - verbose but unambiguous.</p>
<h2><a class="header" href="#beacon-node-api" id="beacon-node-api">Beacon Node API</a></h2>
<h3><a class="header" href="#getbeaconhead" id="getbeaconhead">getBeaconHead</a></h3>
<p>The latest head slot, as chosen by the latest fork choice.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getBeaconHead&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getchainhead" id="getchainhead">getChainHead</a></h3>
<p>Show chain head information, including head, justified and finalized checkpoints.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getChainHead&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getsyncing" id="getsyncing">getSyncing</a></h3>
<h3><a class="header" href="#getbeaconblock" id="getbeaconblock">getBeaconBlock</a></h3>
<h3><a class="header" href="#getbeaconstate" id="getbeaconstate">getBeaconState</a></h3>
<h3><a class="header" href="#getnetworkpeerid" id="getnetworkpeerid">getNetworkPeerId</a></h3>
<h3><a class="header" href="#getnetworkpeers" id="getnetworkpeers">getNetworkPeers</a></h3>
<h3><a class="header" href="#getnetworkenr" id="getnetworkenr">getNetworkEnr</a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getNetworkEnr&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetgenesisget_v1_beacon_genesisa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetgenesisget_v1_beacon_genesisa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getGenesis"><code>get_v1_beacon_genesis</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_genesis&quot;,&quot;params&quot;:[],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstaterootget_v1_beacon_states_roota" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstaterootget_v1_beacon_states_roota"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateRoot"><code>get_v1_beacon_states_root</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_root&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstateforkget_v1_beacon_states_forka" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstateforkget_v1_beacon_states_forka"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateFork"><code>get_v1_beacon_states_fork</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_fork&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatefinalitycheckpointsget_v1_beacon_states_finality_checkpointsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatefinalitycheckpointsget_v1_beacon_states_finality_checkpointsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateFinalityCheckpoints"><code>get_v1_beacon_states_finality_checkpoints</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_states_finality_checkpoints&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorsget_v1_beacon_states_stateid_validatorsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorsget_v1_beacon_states_stateid_validatorsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateValidators"><code>get_v1_beacon_states_stateId_validators</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorget_v1_beacon_states_stateid_validators_validatorida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetstatevalidatorget_v1_beacon_states_stateid_validators_validatorida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getStateValidator"><code>get_v1_beacon_states_stateId_validators_validatorId</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetepochcommitteesget_v1_beacon_states_stateid_committees_epocha" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetepochcommitteesget_v1_beacon_states_stateid_committees_epocha"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getEpochCommittees"><code>get_v1_beacon_states_stateId_committees_epoch</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheadersget_v1_beacon_headersa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheadersget_v1_beacon_headersa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockHeaders"><code>get_v1_beacon_headers</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheaderget_v1_beacon_headers_blockida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockheaderget_v1_beacon_headers_blockida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockHeader"><code>get_v1_beacon_headers_blockId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_headers_blockId&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockget_v1_beacon_blocks_blockida" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockget_v1_beacon_blocks_blockida"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlock"><code>get_v1_beacon_blocks_blockId</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockrootget_v1_beacon_blocks_blockid_roota" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockrootget_v1_beacon_blocks_blockid_roota"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockRoot"><code>get_v1_beacon_blocks_blockId_root</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId_root&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeacongetblockattestationsget_v1_beacon_blocks_blockid_attestationsa" id="a-hrefhttpsethereumgithubioeth20-apisbeacongetblockattestationsget_v1_beacon_blocks_blockid_attestationsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/getBlockAttestations"><code>get_v1_beacon_blocks_blockId_attestations</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_beacon_blocks_blockId_attestations&quot;,&quot;params&quot;:[&quot;finalized&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattestationspost_v1_beacon_pool_attestationsa" id="a-hrefhttpsethereumgithubioeth20-apisbeaconsubmitpoolattestationspost_v1_beacon_pool_attestationsa"><a href="https://ethereum.github.io/eth2.0-APIs/#/Beacon/submitPoolAttestations"><code>post_v1_beacon_pool_attestations</code></a></a></h3>
<h2><a class="header" href="#valdiator-api" id="valdiator-api">Valdiator API</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceblockget_v1_validator_blocka" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceblockget_v1_validator_blocka"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/produceBlock"><code>get_v1_validator_block</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapipublishblockpost_v1_validator_blocka" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapipublishblockpost_v1_validator_blocka"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/publishBlock"><code>post_v1_validator_block</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceattestationget_v1_validator_attestationa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapiproduceattestationget_v1_validator_attestationa"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/produceAttestation"><code>get_v1_validator_attestation</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_validator_attestation_data&quot;,&quot;params&quot;:[0,3],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetaggregatedattestationget_v1_validator_aggregate_and_proofa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetaggregatedattestationget_v1_validator_aggregate_and_proofa"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/getAggregatedAttestation"><code>get_v1_validator_aggregate_and_proof</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapipublishaggregateandproofpost_v1_validator_aggregate_and_proofa" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapipublishaggregateandproofpost_v1_validator_aggregate_and_proofa"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/publishAggregateAndProof"><code>post_v1_validator_aggregate_and_proof</code></a></a></h3>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetattesterdutiespost_v1_validator_duties_attestera" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetattesterdutiespost_v1_validator_duties_attestera"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/getAttesterDuties"><code>post_v1_validator_duties_attester</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;post_v1_validator_duties_attester&quot;,&quot;params&quot;:[1,[&quot;a7a0502eae26043d1ac39a39457a6cdf68fae2055d89c7dc59092c25911e4ee55c4e7a31ade61c39480110a393be28e8&quot;,&quot;a1826dd94cd96c48a81102d316a2af4960d19ca0b574ae5695f2d39a88685a43997cef9a5c26ad911847674d20c46b75&quot;]],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetproposerdutiesget_v1_validator_duties_proposera" id="a-hrefhttpsethereumgithubioeth20-apisvalidatorrequiredapigetproposerdutiesget_v1_validator_duties_proposera"><a href="https://ethereum.github.io/eth2.0-APIs/#/ValidatorRequiredApi/getProposerDuties"><code>get_v1_validator_duties_proposer</code></a></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;get_v1_validator_duties_proposer&quot;,&quot;params&quot;:[1] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h2><a class="header" href="#config" id="config">Config</a></h2>
<h3><a class="header" href="#a-hrefhttpsethereumgithubioeth20-apisconfiggetforkscheduleget_v1_config_fork_schedulea" id="a-hrefhttpsethereumgithubioeth20-apisconfiggetforkscheduleget_v1_config_fork_schedulea"><a href="https://ethereum.github.io/eth2.0-APIs/#/Config/getForkSchedule"><code>get_v1_config_fork_schedule</code></a></a></h3>
<h2><a class="header" href="#administrative--debug-api" id="administrative--debug-api">Administrative / Debug API</a></h2>
<h3><a class="header" href="#get_v1_debug_beacon_states_stateid---returns-an-entire-beaconstate-object-for-the-specified-stateid" id="get_v1_debug_beacon_states_stateid---returns-an-entire-beaconstate-object-for-the-specified-stateid"><code>get_v1_debug_beacon_states_stateId</code> - returns an entire <code>BeaconState</code> object for the specified <code>stateId</code></a></h3>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;get_v1_debug_beacon_states_stateId&quot;,&quot;params&quot;:[&quot;head&quot;],&quot;id&quot;:1}' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getnodeversion" id="getnodeversion">getNodeVersion</a></h3>
<p>Show version of the software</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getNodeVersion&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#getspecpreset" id="getspecpreset">getSpecPreset</a></h3>
<p>Show spec constants in use.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;getSpecPreset&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h3><a class="header" href="#peers" id="peers">peers</a></h3>
<p>Show a list of peers that the beacon node is connected to.</p>
<pre><code>curl -d '{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:&quot;id&quot;,&quot;method&quot;:&quot;peers&quot;,&quot;params&quot;:[] }' -H 'Content-Type: application/json' localhost:9190 -s | jq
</code></pre>
<h1><a class="header" href="#advanced-usage-for-developers" id="advanced-usage-for-developers">Advanced Usage for Developers</a></h1>
<p>Latest updates happen in the <code>devel</code> branch which is merged into <code>master</code> every week on Tuesday before deploying a new testnets
The following sections explain how to setup your build environment on your platform.</p>
<h3><a class="header" href="#windows-dev-environment" id="windows-dev-environment">Windows dev environment</a></h3>
<p>Install Mingw-w64 for your architecture using the &quot;<a href="https://sourceforge.net/projects/mingw-w64/files/">MinGW-W64 Online
Installer</a>&quot; (first link
under the directory listing). Run it and select your architecture in the setup
menu (<code>i686</code> on 32-bit, <code>x86_64</code> on 64-bit), set the threads to <code>win32</code> and
the exceptions to &quot;dwarf&quot; on 32-bit and &quot;seh&quot; on 64-bit. Change the
installation directory to &quot;C:\mingw-w64&quot; and add it to your system PATH in &quot;My
Computer&quot;/&quot;This PC&quot; -&gt; Properties -&gt; Advanced system settings -&gt; Environment
Variables -&gt; Path -&gt; Edit -&gt; New -&gt; C:\mingw-w64\mingw64\bin (it's &quot;C:\mingw-w64\mingw32\bin&quot; on 32-bit)</p>
<p>Install <a href="https://gitforwindows.org/">Git for Windows</a> and use a &quot;Git Bash&quot; shell to clone and build nim-beacon-chain.</p>
<p>If you don't want to compile PCRE separately, you can fetch pre-compiled DLLs with:</p>
<pre><code class="language-bash">mingw32-make # this first invocation will update the Git submodules
mingw32-make fetch-dlls # this will place the right DLLs for your architecture in the &quot;build/&quot; directory
</code></pre>
<p>You can now follow the instructions in this this book by replacing <code>make</code> with <code>mingw32-make</code> (you should run <code>mingw32</code> regardless of whether you're running 32-bit or 64-bit architecture):</p>
<pre><code class="language-bash">mingw32-make test # run the test suite
</code></pre>
<h3><a class="header" href="#linux-macos" id="linux-macos">Linux, macOS</a></h3>
<p>After cloning the repo:</p>
<pre><code class="language-bash"># Build beacon_node and all the tools, using 4 parallel Make jobs
make -j4

# Run tests
make test

# Update to latest version
git pull
make update
</code></pre>
<p>To run a command that might use binaries from the Status Nim fork:</p>
<pre><code class="language-bash">./env.sh bash # start a new interactive shell with the right env vars set
which nim
nim --version # Nimbus is tested and supported on 1.0.2 at the moment

# or without starting a new interactive shell:
./env.sh which nim
./env.sh nim --version
</code></pre>
<h3><a class="header" href="#raspberry-pi" id="raspberry-pi">Raspberry Pi</a></h3>
<p>We recommend you remove any cover or use a fan; the Raspberry Pi will get hot (85°C) and throttle.</p>
<ul>
<li>Raspberry PI 3b+ or Raspberry Pi 4b.</li>
<li>64gb SD Card (less might work too, but the default recommended 4-8GB will probably be too small)</li>
<li><a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Buster Lite</a> - Lite version is enough to get going and will save some disk space!</li>
</ul>
<p>Assuming you're working with a freshly written image:</p>
<pre><code class="language-bash">
# Start by increasing swap size to 2gb:
sudo vi /etc/dphys-swapfile
# Set CONF_SWAPSIZE=2048
# :wq
sudo reboot

# Install prerequisites
sudo apt-get install git libgflags-dev libsnappy-dev libpcre3-dev

# Then you can follow instructions for Linux.

</code></pre>
<h3><a class="header" href="#makefile-tips-and-tricks-for-developers" id="makefile-tips-and-tricks-for-developers">Makefile tips and tricks for developers</a></h3>
<ul>
<li>build all those tools known to the Makefile:</li>
</ul>
<pre><code class="language-bash"># $(nproc) corresponds to the number of cores you have
make -j$(nproc)
</code></pre>
<ul>
<li>build a specific tool:</li>
</ul>
<pre><code class="language-bash">make state_sim
</code></pre>
<ul>
<li>you can control the Makefile's verbosity with the V variable (defaults to 0):</li>
</ul>
<pre><code class="language-bash">make V=1 # verbose
make V=2 test # even more verbose
</code></pre>
<ul>
<li>same for the <a href="https://github.com/status-im/nim-chronicles#chronicles_log_level">Chronicles log level</a>:</li>
</ul>
<pre><code class="language-bash">make LOG_LEVEL=DEBUG bench_bls_sig_agggregation # this is the default
make LOG_LEVEL=TRACE beacon_node # log everything
</code></pre>
<ul>
<li>pass arbitrary parameters to the Nim compiler:</li>
</ul>
<pre><code class="language-bash">make NIMFLAGS=&quot;-d:release&quot;
</code></pre>
<ul>
<li>you can freely combine those variables on the <code>make</code> command line:</li>
</ul>
<pre><code class="language-bash">make -j$(nproc) NIMFLAGS=&quot;-d:release&quot; USE_MULTITAIL=yes eth2_network_simulation
</code></pre>
<ul>
<li>don't use the <a href="https://github.com/status-im/nim-beacon-chain/pull/745">lightweight stack tracing implementation from nim-libbacktrace</a>:</li>
</ul>
<pre><code class="language-bash">make USE_LIBBACKTRACE=0 # expect the resulting binaries to be 2-3 times slower
</code></pre>
<h3><a class="header" href="#multi-client-interop-scripts" id="multi-client-interop-scripts">Multi-client interop scripts</a></h3>
<p><a href="https://github.com/eth2-clients/multinet">This repository</a> contains a set of scripts used by the client implementation teams to test interop between the clients (in certain simplified scenarios). It mostly helps us find and debug issues.</p>
<h1><a class="header" href="#setting-up-a-systemd-service" id="setting-up-a-systemd-service">Setting up a systemd service</a></h1>
<p>This guide will take you through how to set up a <code>systemd</code> service for your beacon node.</p>
<blockquote>
<p><a href="https://www.freedesktop.org/wiki/Software/systemd/"><code>systemd</code></a> is a service manager designed specifically for Linux. There is no port to Mac OS.</p>
</blockquote>
<h2><a class="header" href="#prerequisites-2" id="prerequisites-2">Prerequisites</a></h2>
<p>NBC's <a href="./install.html#external-dependencies">external dependencies</a> and a working <a href="https://golang.org/doc/install">Go</a> installation (v1.11 or later).</p>
<h3><a class="header" href="#1-clone-repositories" id="1-clone-repositories">1. Clone repositories</a></h3>
<p>Clone the <a href="https://github.com/status-im/nim-beacon-chain">nim-beacon-chain</a> and <a href="https://github.com/Alethio/eth2stats-client">eth2stats</a> repositories in the same directory (so that both repositories are adjacent to each other).</p>
<pre><code class="language-console">git clone https://github.com/status-im/nim-beacon-chain.git
git clone https://github.com/Alethio/eth2stats-client.git
</code></pre>
<h3><a class="header" href="#2-build-repositories" id="2-build-repositories">2. Build repositories</a></h3>
<p>Build both repositories by following their respective build instructions. </p>
<p><em>nim-beacon-chain</em></p>
<pre><code class="language-console">cd nim-beacon-chain
make beacon_node
</code></pre>
<p><em>eth2stats</em></p>
<pre><code class="language-console">cd eth2stats-client
make build
</code></pre>
<p>The resulting binaries should appear in <code>nim-beacon-chain/build/beacon_node</code> and <code>eth2stats-client/eth2stats-client</code>, respectively.</p>
<h3><a class="header" href="#3-create-an-executable-script" id="3-create-an-executable-script">3. Create an executable script</a></h3>
<p>Create an executable script, <code>run_nimbus_node.sh</code>, and place it adjacent to the repositories you cloned in step 1 (same directory level).</p>
<pre><code class="language-bash">#!/bin/bash

set +e

trap &quot;trap - SIGTERM &amp;&amp; kill -- -$$&quot; SIGINT SIGTERM EXIT

cd $(dirname &quot;$0&quot;)
cd nim-beacon-chain

NETWORK=$1
NODE_NAME=${NODE_NAME:-$(whoami)}

if [[ &quot;$2&quot; == &quot;&quot; ]]; then
  NODE_ID=0
else
  NODE_ID=$2
  NODE_NAME=$NODE_NAME-$2
fi

let METRICS_PORT=8008+${NODE_ID}
let RPC_PORT=9190+${NODE_ID}

# add your node to eth2stats and run a data collector app that connects to your beacon chain client
mkdir -p /tmp/${NODE_NAME}
../eth2stats-client/eth2stats-client run \
  --data.folder=/tmp/${NODE_NAME} \
  --eth2stats.node-name=&quot;${NODE_NAME}&quot; \
  --eth2stats.addr=&quot;grpc.${NETWORK}.eth2stats.io:443&quot; --eth2stats.tls=true \
  --beacon.type=&quot;nimbus&quot; \
  --beacon.addr=&quot;http://localhost:$RPC_PORT&quot; \
  --beacon.metrics-addr=&quot;http://localhost:$METRICS_PORT/metrics&quot; &gt; /tmp/ethstats.$NODE_NAME.log 2&gt;&amp;1 &amp;

# build and run the beacon node
make NIMFLAGS=&quot;-d:insecure&quot; NODE_ID=$NODE_ID ${NETWORK}
</code></pre>
<blockquote>
<p>Tip: don't forget to mark the script as executable by running <code>chmod +x</code> on it.</p>
</blockquote>
<h3><a class="header" href="#4-create-a-systemd-service-unit-file" id="4-create-a-systemd-service-unit-file">4. Create a systemd service unit file</a></h3>
<p>Create a <code>systemd</code> service unit file, <code>nbc.service</code>, and save it in <code>/etc/systemd/system/</code>.</p>
<pre><code class="language-txt">[Unit]
Description=Nimbus beacon node

[Service]
ExecStart=&lt;BASE-DIRECTORY&gt;/run_nimbus_node.sh medalla
User=&lt;USERNAME&gt;
Group=&lt;USERNAME&gt;
Restart=always
RuntimeMaxSec=10800

[Install]
WantedBy=default.target

</code></pre>
<p>Replace:</p>
<p><code>&lt;BASE-DIRECTORY&gt;</code> with the location of the repository in which you performed the <code>git clone</code> command in step 1.</p>
<p><code>&lt;USERNAME&gt;</code> with the username of the system user responsible for running the launched processes.</p>
<h3><a class="header" href="#5-notify-systemd-of-the-newly-added-service" id="5-notify-systemd-of-the-newly-added-service">5. Notify systemd of the newly added service</a></h3>
<pre><code class="language-console">sudo systemctl daemon-reload
</code></pre>
<h3><a class="header" href="#6-start-the-nim-beacon-chain-service" id="6-start-the-nim-beacon-chain-service">6. Start the nim beacon chain service</a></h3>
<pre><code class="language-console">sudo systemctl enable nbc --now
</code></pre>
<h1><a class="header" href="#generating-your-keys-with-nbc" id="generating-your-keys-with-nbc">Generating your keys with NBC</a></h1>
<p>In this chapter, we'll take you through how to create an <a href="https://github.com/ethereum/EIPs/blob/4494da0966afa7318ec0157948821b19c4248805/EIPS/eip-2386.md">EIP-2386</a> wallet to help you generate your validator keys (keystores), create a <code>deposits_data</code> file compatible with the Ethereum Foundation's <a href="https://medalla.launchpad.ethereum.org/">Validator Launchpad</a>, and use the launchpad to send this data to the eth1 network so that your validator can be registered.</p>
<blockquote>
<p><strong>Note:</strong> this page is primarily aimed at users who wish to run multiple validators on several machines. If you simply wish to get one validator up and running with Nimbus, or run several validators on a single machine, we recommend following our <a href="./medalla.html">become a Medalla validator</a> guide instead.</p>
</blockquote>
<p>For our purposes, a wallet is the <a href="https://github.com/ethereum/EIPs/blob/4494da0966afa7318ec0157948821b19c4248805/EIPS/eip-2386.md">EIP-2386</a> JSON file which contains an encrypted seed, a name, and a counter (<code>nextaccount</code>) that allows for generating validator keystores incrementally as outlined in <a href="https://eips.ethereum.org/EIPS/eip-2334">EIP-2334</a> (Deterministic Account Hierarchy). It's sometimes referred to as a wallestore.</p>
<p>Such a wallet can create (and restore) keys from a <em>seed</em> and a <em>path</em>. The encrypted seed is stored in the wallet (it needs to be accessible to create new keys). Further, the wallet also has a mechanism (a <code>nextaccount</code> index) for maintaining state about which keys have been generated (to help ensure you don't duplicate a key by accident).</p>
<h2><a class="header" href="#when-do-i-need-to-use-a--wallet" id="when-do-i-need-to-use-a--wallet">When do I need to use a  wallet?</a></h2>
<p>If you're asking yourself this question then you probably don't need to use one :)</p>
<p>To be clear, the purpose of such a wallet is to help you generate your keystores (and keep track of how many you've generated). But you don't need a wallet to do this.</p>
<blockquote>
<p><strong>Tip:</strong> You can use tools like the Ethereum Foundation's <a href="https://github.com/ethereum/eth2.0-deposit-cli">deposit-cli</a> to generate keystores without a wallet. In fact, we recommend this approach if you're not sure whether or not you need a wallet.</p>
</blockquote>
<h2><a class="header" href="#prerequisites-3" id="prerequisites-3">Prerequisites</a></h2>
<p>You need to have installed Nimbus' <a href="./install.html#external-dependencies">external dependencies</a> and <a href="./beacon_node.html#building-the-node">built the beacon node</a>.</p>
<h2><a class="header" href="#1-create--a-wallet" id="1-create--a-wallet">1. Create  a wallet</a></h2>
<p>Run the following command from the the home directory of the <code>nim-beacon-chain</code> repository to launch the command line interface app:</p>
<pre><code>build/beacon_node wallets create
</code></pre>
<p>Now follow the instructions presented to you in the terminal window to create your wallet.</p>
<pre><code class="language-bash">Wallet id: &lt;YOUR_WALLET_ID&gt;
INF 2020-08-18 11:05:47.126+02:00 Wallet file written
tid=137382
file=keystore_management.nim:404
path=&quot;&lt;WHERE_YOUR_WALLET_IS_SAVED&gt;&quot;
</code></pre>
<p>At the end of the process, you should see the above message printed to the terminal. Make sure to keep track of your wallet id, and path.</p>
<h3><a class="header" href="#available-options" id="available-options">Available options</a></h3>
<p>To see a list of the options/flags available, run:</p>
<pre><code class="language-bash">build/beacon_node wallets create --help
</code></pre>
<p>You should see the following:</p>
<pre><code>The following options are available:

 --next-account      Initial value for the 'nextaccount' property of the wallet.
 --name              An easy-to-remember name for the wallet of your choice.
 --out               Output wallet file.
</code></pre>
<h2><a class="header" href="#2-create-a-keystore-and-signed-deposit" id="2-create-a-keystore-and-signed-deposit">2. Create a keystore and signed deposit</a></h2>
<p>To generate 1 keystore and create a <code>deposit_data</code> JSON file using an existing wallet, run:</p>
<pre><code class="language-bash">build/beacon_node deposits create --wallet=&quot;&lt;YOUR_WALLET_ID&gt;&quot; --count=1
</code></pre>
<blockquote>
<p><strong>Tip:</strong> To find your wallet id, look at your terminal history. You should see it printed right after you created your wallet. It's also saved in the <code>uuid</code> field of your wallet (remember your wallet is simply a JSON file).</p>
</blockquote>
<p>Enter your password to unlock your wallet, create your signing keystore, and generate a <code>deposit_data</code> file.</p>
<pre><code class="language-bash">INF 2020-08-19 13:53:24.271+02:00 Generating deposits
tid=330637
file=keystore_management.nim:143 
totalValidators=2
validatorsDir=validators 
secretsDir=secrets

INF 2020-08-19 13:53:24.286+02:00 Deposit data written
topics=&quot;beacnde&quot; tid=330637 
file=beacon_node.nim:1406 
filename=validators/deposit_data-1597838004.284995.json
</code></pre>
<p>The deposit data file you just created contains a signed deposit (signed by the key you just created). You can find it in the newly created <code>validators</code> directory.</p>
<p>In the <code>validators</code> directory you should also see a folder with a name that looks something like <code>0x8c...3ed3a5052e2d</code>. The name of this folder is your validator's public key. Inside it you'll find your validator's signing keystore -- <code>keystore.json</code>.</p>
<blockquote>
<p><strong>Note:</strong> If you wish to create a new wallet from which to make a deposit (simply run <code>deposits create</code> with no extra flags).</p>
</blockquote>
<h3><a class="header" href="#available-options-1" id="available-options-1">Available options</a></h3>
<p>To see a list of the options/flags available, run:</p>
<pre><code class="language-bash">build/beacon_node deposits create --help
</code></pre>
<p>You should see the following:</p>
<pre><code>The following options are available:

 --count                   Number of deposits to generate.
 --wallet                  An existing wallet ID. If not specified, a new wallet will be created.
 --out-validators-dir      Output folder for validator keystores.
 --out-secrets-dir         Output folder for randomly generated keystore passphrases.
 --out-deposits-file       The name of generated deposits file.
 --new-wallet-name         An easy-to-remember name for the wallet of your choice.
 --new-wallet-file         Output wallet file.
</code></pre>
</details>
<h2><a class="header" href="#3-send-your-deposit-transactions" id="3-send-your-deposit-transactions">3. Send your deposit transaction(s)</a></h2>
<p>You're now ready to upload your <code>deposit_data</code> JSON file along with your signing keystore(s) to the EF's <a href="https://medalla.launchpad.ethereum.org/">Validator Launchpad</a>: it will take you through how to create the necessary transaction(s) to make your deposit(s) and register your validator(s).</p>
<blockquote>
<p><strong>Note:</strong> Your <code>deposit_data</code> file contains a list of all your signed deposits. So even if you have many keystores, you should only have one <code>deposit_data</code> file.</p>
</blockquote>
<ol start="0">
<li>
<p>Make sure you have enough <a href="https://faucet.goerli.mudit.blog/">Goerli ETH</a>  (32 ETH for each validator you wish to run). See <a href="create_wallet_and_deposit.html#a-note-on-acquiring-goerli-eth">here</a> for how to request Goerli ETH.</p>
</li>
<li>
<p>Go to <a href="https://medalla.launchpad.ethereum.org/">https://medalla.launchpad.ethereum.org</a></p>
</li>
</ol>
<img src="https://storage.googleapis.com/ethereum-hackmd/upload_431e6a8ec269404e3f89fec7133482b9.png" width="700">
<ol start="2">
<li>Click on <strong>Get Started</strong></li>
</ol>
<img src="https://storage.googleapis.com/ethereum-hackmd/upload_cbe2983e3795cfa57b621ae21b6ba165.png" width="700">
<ol start="3">
<li>Read through the <em>Overview section</em> -- making sure you understand the risks and responsibilities involved</li>
</ol>
<p>
<img width="350" src="https://storage.googleapis.com/ethereum-hackmd/upload_86a7b1e968fe5830cac4a06d4597f221.png">
<img width="350" src="https://storage.googleapis.com/ethereum-hackmd/upload_a630e2ad0e9c5e6c3111dd1fba3c9767.png">
</p>
<ol start="4">
<li>Move on to the <em>Generate Keys</em> section to choose how many validators you'd like to run (1 per 32 ETH deposited)</li>
</ol>
<img src="https://storage.googleapis.com/ethereum-hackmd/upload_0fd4e55870b4b6ce57c80644323b45bd.png" width="700">
<ol start="5">
<li>Scroll to the end of the Key Generation page, tick the box, and click continue</li>
</ol>
<img src="https://storage.googleapis.com/ethereum-hackmd/upload_10fcb69be02662e10bc4b62c29d8a074.png" width="700">
<ol start="6">
<li>Upload the Deposit data file you generated using Nimbus in the previous step</li>
</ol>
<img src="https://storage.googleapis.com/ethereum-hackmd/upload_6db4e4c3715a0a80db53bd5f26eb1ffc.png" width="500">
<p><em>Remember you can find your <code>deposit_data</code> JSON file in the <code>nim-beacon-chain/validators</code> directory</em></p>
</br>
<p>The launchpad will then double check you understand the most important things. And help you send the required transaction(s).</p>
<p>
<img width="350" src="https://storage.googleapis.com/ethereum-hackmd/upload_e2c60ad1c9840d0f2fcf5c4ae8ec284a.png">
<img width="350" src="https://storage.googleapis.com/ethereum-hackmd/upload_0d3c0a5c8cb421041b6847f0c2d24328.png">
</p>
<h3><a class="header" href="#a-note-on-acquiring-goerli-eth" id="a-note-on-acquiring-goerli-eth">A note on acquiring Goerli ETH</a></h3>
<p>The easiest way to acquire testnet ETH is to join <a href="https://discord.com/invite/YMVYzv6">Prysmatic Labs' discord</a> and send a request for ETH in the <strong>#-request-goerli-eth channel</strong>.</p>
<pre><code>!send &lt;your metamask goerli network ETH address&gt;
</code></pre>
<p>You can also use the <a href="https://faucet.goerli.mudit.blog/">Goerli Authenticated Faucet</a>.</p>
<h2><a class="header" href="#4-connect-to-medalla-1" id="4-connect-to-medalla-1">4. Connect to Medalla</a></h2>
<p>Now that you've generated your keys and registered your validator, the final step is to <a href="medalla.html#connect-to-medalla">connect to Medalla</a>.</p>
<h3><a class="header" href="#a-note-on-expected-waiting-time-the-queue" id="a-note-on-expected-waiting-time-the-queue">A note on expected waiting time (the queue)</a></h3>
<p>Once you send off your transaction(s), your validator will be put in a queue based on deposit time, and will getting through the queue may take a few hours or days (assuming the chain is finalising).</p>
<p>More technically: approximately every 3.5 hours the eth2 beacon chain receives an &quot;include until X&quot; eth1 block to vote on: this block must be at least 1024 blocks behind the eth1 head. However, can be made anywhere between the start and the end of a voting period, the time you'll need to wait can fluctuate (within a range of 1 or 2 voting periods).</p>
<h1><a class="header" href="#frequently-asked-questions" id="frequently-asked-questions">Frequently Asked Questions</a></h1>
<h2><a class="header" href="#nimbus" id="nimbus">Nimbus</a></h2>
<h3><a class="header" href="#why-are-metrics-not-working" id="why-are-metrics-not-working">Why are metrics not working?</a></h3>
<p>Metrics are currently implemented using a HTTP server that hasn't been hardened sufficiently (which means it can't be exposed as a public endpoint). It must therefore be enabled specifically during build:</p>
<pre><code>make NIMFLAGS=&quot;-d:insecure&quot; beacon_node --metrics ...
</code></pre>
<h2><a class="header" href="#validating-1" id="validating-1">Validating</a></h2>
<h3><a class="header" href="#what-exactly-is-a-validator" id="what-exactly-is-a-validator">What exactly is a validator?</a></h3>
<p>A validator is an entity that participates in the consensus of the Ethereum 2.0 protocol.</p>
<p>Or in plain english, a human running a computer process. This process proposes and vouches for new blocks to be added to the blockchain.</p>
<p>In other words, <strong>you can think of a validator as a voter for new blocks.</strong> The more votes a block gets, the more likely it is to be added to the chain.</p>
<p>Importantly, a validator's vote is weighted by the amount it has at stake.</p>
<h3><a class="header" href="#what-is-the-deposit-contract" id="what-is-the-deposit-contract">What is the deposit contract?</a></h3>
<p>You can think of it as a transfer of funds between Ethereum 1.0 accounts and Ethereum 2.0 validators.</p>
<p>It specifies who is staking, who is validating, how much is being staked, and who can withdraw the funds.</p>
<h3><a class="header" href="#why-do-validators-need-to-have-funds-at-stake" id="why-do-validators-need-to-have-funds-at-stake">Why do validators need to have funds at stake?</a></h3>
<p>Validators need to have funds at stake so they can be penalized for behaving dishonestly.</p>
<p>In other words, to keep them honest, their actions need to have financial consequences.</p>
<h3><a class="header" href="#how-much-eth-does-a-validator-need-to-stake" id="how-much-eth-does-a-validator-need-to-stake">How much ETH does a validator need to stake?</a></h3>
<p>Before a validator can start to secure the network, he or she needs to stake <strong>32 ETH</strong>. This forms the validator's initial balance.</p>
<h3><a class="header" href="#is-there-any-advantage-to-having-more-than-32-eth-at-stake" id="is-there-any-advantage-to-having-more-than-32-eth-at-stake">Is there any advantage to having more than 32 ETH at stake?</a></h3>
<p>No. There is no advantage to having more than 32 ETH staked. </p>
<p>Limiting the maximum stake to 32 ETH encourages decentralization of power as it prevents any single validator from having an excessively large vote on the state of the chain.</p>
<blockquote>
<p>Remember that a validator’s vote is weighted by the amount it has at stake.</p>
</blockquote>
<h3><a class="header" href="#how-are-validators-incentivized-to-stay-active-and-honest" id="how-are-validators-incentivized-to-stay-active-and-honest">How are validators incentivized to stay active and honest?</a></h3>
<p>In addition to being penalized for being offline, validators are penalized for behaving maliciously – for example attesting to invalid or contradicting blocks.</p>
<p>On the other hand, they are rewarded for proposing / attesting to blocks that are included in the chain.</p>
<p>The key concept is the following:</p>
<ul>
<li>Rewards are given for actions that help the network reach consensus</li>
<li>Minor penalties are given for inadvertant actions (or inactions) that hinder consensus</li>
<li>And major penalities -- or <strong>slashings</strong> -- are given for malicious actions</li>
</ul>
<p>In other words, validators that maximize their rewards also provide the greatest benefit to the network as a whole.</p>
<h3><a class="header" href="#how-are-rewardspenalties-issued" id="how-are-rewardspenalties-issued">How are rewards/penalties issued?</a></h3>
<p>Remember that each validator has its own balance -- with the initial balance outlined in the deposit contract.</p>
<p>This balance is updated periodically by the Ethereum network rules as the validator carries (or fails to carry) out his or her responsibilities.</p>
<p>Put another way, rewards and penalties are reflected in the validator's balance over time.</p>
<h3><a class="header" href="#how-often-are-rewardspenalties-issued" id="how-often-are-rewardspenalties-issued">How often are rewards/penalties issued?</a></h3>
<p>Approximately every six and a half minutes -- a period of time known as an epoch.</p>
<p>Every epoch, the network measures the actions of each validator and issues rewards or penalties appropriately.</p>
<h3><a class="header" href="#how-large-are-the-rewardspenalties" id="how-large-are-the-rewardspenalties">How large are the rewards/penalties?</a></h3>
<p>There is no easy answer to this question as there are many factors that go into this calculation.</p>
<p>Arguably the most impactful factor on rewards earned for validating transactions is the total amount of stake in the network. In other words, the total amount of validators. Depending on this figure the max annual return rate for a validator can be anywhere between 2 and 20%.</p>
<p>Given a fixed total number of validators, the rewards/penalties predominantly scale with the balance of the validator -- attesting with a higher balance results in larger rewards/penalties whereas attesting with a lower balance results in lower rewards/penalties.</p>
<blockquote>
<p>Note however that this scaling mechanism works in a non-obvious way. To understand the precise details of how it works requires understanding a concept called <strong>effective balance</strong>. If you're not yet familiar with this concept, we recommend you read through this <a href="https://www.attestant.io/posts/understanding-validator-effective-balance/">excellent post</a>.</p>
</blockquote>
<h3><a class="header" href="#why-do-rewards-depend-on-the-total-number-of-validators-in-the-network" id="why-do-rewards-depend-on-the-total-number-of-validators-in-the-network">Why do rewards depend on the total number of validators in the network?</a></h3>
<p>Block rewards are calculated using a sliding scale based on the total amount of ETH staked on the network.</p>
<p>In plain english: if the total amount of ETH staked is low, the reward (interest rate) is high, but as the total stake rises, the reward (interest) paid out to each validator starts to fall.</p>
<p>Why a sliding scale? While we won't get into the gory details here, the basic intution is that there needs to be a minimum number of validators (and hence a minimum amount of ETH staked) for the network to function properly. So, to incentivize more validators to join, it's important that the interest rate remains high until this minimum number is reached.</p>
<p>Afterwards, validators are still encouraged to join (the more validators the more decentralized the network), but it's not absolutely essential that they do so (so the interest rate can fall).</p>
<h3><a class="header" href="#how-badly-will-a-validator-be-penalized-for-being-offline" id="how-badly-will-a-validator-be-penalized-for-being-offline">How badly will a validator be penalized for being offline?</a></h3>
<p>It depends. In addition to <a href="https://www.attestant.io/posts/understanding-validator-effective-balance/#the-impact-of-effective-balance-on-validating">the impact of effective balance</a> there are two important scenarios to be aware of:</p>
<ol>
<li>
<p>Being offline while a supermajority (2/3) of validators is still online leads to relatively small penalties as there are still enough validators online for the chain to finalize. <strong>This is the expected scenario.</strong></p>
</li>
<li>
<p>Being offline at the same time as more than 1/3 of the total number of validators leads to harsher penalties, since blocks do not finalize anymore. <strong>This scenario is very extreme and unlikely to happen.</strong></p>
</li>
</ol>
<blockquote>
<p>Note that in the second (unlikely) scenario, validators stand to progressively lose up to 50% (16 ETH) of their stake over 21 days. After 21 days they are ejected out of the validator pool. This ensures that blocks start finalizing again at some point.</p>
</blockquote>
<h3><a class="header" href="#how-great-does-an-honest-validators-uptime-need-to-be-for-it-to-be-net-profitable" id="how-great-does-an-honest-validators-uptime-need-to-be-for-it-to-be-net-profitable">How great does an honest validator's uptime need to be for it to be net profitable?</a></h3>
<p>Overall, validators are expected to be net profitable as long as their uptime is <a href="https://blog.ethereum.org/2020/01/13/validated-staking-on-eth2-1-incentives/">greater than 50%</a>. </p>
<p>This means that validators need not go to extreme lengths with backup clients or redundant internet connections as the repercussions of being offline are not so severe.</p>
<h3><a class="header" href="#how-much-will-a-validator-be-penalized-for-acting-maliciously" id="how-much-will-a-validator-be-penalized-for-acting-maliciously">How much will a validator be penalized for acting maliciously?</a></h3>
<p>Again, it depends. Behaving maliciously – for example attesting to invalid or contradicting blocks, will lead to a validator's stake being slashed.</p>
<p>The minimum amount that can be slashed is 1 ETH, but <strong>this number increases if other validators are slashed at the same time.</strong></p>
<p>The idea behind this is to minimize the losses from honest mistakes, but strongly disincentivize coordinated attacks.</p>
<h3><a class="header" href="#what-exactly-is-slashing" id="what-exactly-is-slashing">What exactly is slashing?</a></h3>
<p>Slashing has two purposes: (1) to make it prohibitively expensive to attack eth2, and (2) to stop validators from being lazy by checking that they actually perform their duties. Slashing a validator is to destroy (a portion of) the validator’s stake if they act in a provably destructive manner. </p>
<p>Validators that are slashed are prevented from participating in the protocol further and are forcibly exited.</p>
<h3><a class="header" href="#what-happens-i-lose-my-signing-key" id="what-happens-i-lose-my-signing-key">What happens I lose my signing key?</a></h3>
<p>If the signing key is lost, the validator can no longer propose or attest.</p>
<p>Over time, the validator's balance will decrease as he or she is punished for not participating in the consensus process. When the validator's balance reaches 16 Eth, he or she will be automatically exited from the validator pool.</p>
<blockquote>
<p>However, all is not lost. Assuming validators derive their keys using <a href="https://eips.ethereum.org/EIPS/eip-2334">EIP2334</a> (as per the default onboarding flow)then <strong>validators can always recalculate their signing key from their withdrawal key</strong>.</p>
</blockquote>
<p>The 16 Eth can then be withdrawn -- with the withdrawal key -- after a delay of around a day.</p>
<blockquote>
<p>Note that this delay can be longer if many others are exiting or being kicked out at the same time.</p>
</blockquote>
<h3><a class="header" href="#what-happens-if-i-lose-my-withdrawal-key" id="what-happens-if-i-lose-my-withdrawal-key">What happens if I lose my withdrawal key?</a></h3>
<p>If the withdrawal key is lost, there is no way to obtain access to the funds held by the validator.</p>
<p>As such, it's a good idea to create your keys from mnemonics which act as another backup. This will be the default for validators who join via this site's onboarding process.</p>
<h3><a class="header" href="#what-happens-if-my-withdrawal-key-is-stolen" id="what-happens-if-my-withdrawal-key-is-stolen">What happens if my withdrawal key is stolen?</a></h3>
<p>If the withdrawal key is stolen, the thief can transfer the validator’s balance, but only once the validator has exited.</p>
<p>If the signing key is not under the thief’s control, the thief cannot exit the validator. </p>
<p>The user with the signing key could attempt to quickly exit the validator and then transfer the funds -- with the withdrawal key -- before the thief.</p>
<h3><a class="header" href="#why-two-keys-instead-of-one" id="why-two-keys-instead-of-one">Why two keys instead of one?</a></h3>
<p>In a nutshell, security. The signing key must be available at all times. As such, it will need to be held online. Since anything online is vulnerable to being hacked, it's not a good idea to use the same key for withdrawals.</p>
<h1><a class="header" href="#contribute" id="contribute">Contribute</a></h1>
<p>Follow these steps to contribute to this book!</p>
<p>We use an utility tool called mdBook to create online books from Markdown files.</p>
<h2><a class="header" href="#before-you-start" id="before-you-start">Before You Start</a></h2>
<ol>
<li>Install mdBook from <a href="https://github.com/rust-lang/mdBook">here</a>.</li>
<li>Clone the repository by <code>git clone https://github.com/status-im/nim-beacon-chain.git</code>.</li>
<li>Go to where the Markdown files are located by <code>cd docs</code>.</li>
</ol>
<h2><a class="header" href="#real-time-update-and-preview-changes" id="real-time-update-and-preview-changes">Real-Time Update and Preview Changes</a></h2>
<ol>
<li>Run <code>mdbook serve</code> in the terminal.</li>
<li>Preview the book at <a href="http://localhost:3000">http://localhost:3000</a>.</li>
</ol>
<h2><a class="header" href="#build-and-deploy" id="build-and-deploy">Build and Deploy</a></h2>
<p>The first step is to submit a pull request to the <a href="https://github.com/status-im/nim-beacon-chain/tree/devel">devel branch</a>.
Then, after it is merged, do the following under our main repository:</p>
<ol>
<li><code>cd nim-beacon-chain</code></li>
<li><code>git checkout devel</code></li>
<li><code>git pull</code></li>
<li><code>make update</code> (This is to update the submodules to the latest version)</li>
<li><code>make publish-book</code></li>
</ol>
<h2><a class="header" href="#trouble-shooting" id="trouble-shooting">Trouble Shooting</a></h2>
<p>If you see file conflicts in the pull request, this may due to that you have created your new branch from an old version of the <code>devel</code> branch. Update your new branch using the following commands:</p>
<pre><code>git checkout devel
git pull
make update
git checkout readme
git merge devel
# use something like `git mergetool` to resolve conflicts, then read the instructions for completing the merge (usually just a `git commit`)
# check the output of `git diff devel`
</code></pre>
<p>Thank you so much for your help to the decentralized and open source community. :)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
